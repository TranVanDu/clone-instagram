(this.webpackJsonpmearn_instagram=this.webpackJsonpmearn_instagram||[]).push([[0],{102:function(e,t,a){e.exports=a(174)},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(4),r=a.n(o),c=(a(107),a(1)),i=(a(108),a(16)),s=a(7),u=a(2),m=a.n(u);a(109);var d=function(e){var t=Object(n.useContext)(C),a=t.state,o=t.dispatch,r=Object(i.f)();return l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper",style:{backgroundColor:"#fff"}},l.a.createElement(s.b,{to:a?"/":"/signin",className:"brand-logo left"},"Instagram"),l.a.createElement("ul",{id:"nav-mobile",className:"right"},a?[l.a.createElement("li",{key:0},l.a.createElement(s.b,{to:"/profile"},"Profile")),l.a.createElement("li",{key:1},l.a.createElement(s.b,{to:"/createpost"},"Create Post")),l.a.createElement("li",{key:3},l.a.createElement(s.b,{to:"/myfollowingpost"},"Follow")),l.a.createElement("li",{key:2},l.a.createElement("button",{className:"btn waves-effect waves-light #e53935 red darken-1",style:{marginTop:"0px",marginRight:"20px"},onClick:function(){localStorage.clear(),o({type:"CLEAR"}),m.a.toast({html:"Logout sucess",classes:"#e53935 red darken-1"}),r.push("/signin")}},"Logout"))]:[l.a.createElement("li",{key:3},l.a.createElement(s.b,{to:"/signin"},"Login")),l.a.createElement("li",{key:4},l.a.createElement(s.b,{to:"/signup"},"Signup"))])))},p=a(3);var f=function(){return l.a.createElement("div",{className:"preloader-background"},l.a.createElement("div",{className:"preloader-wrapper small active"},l.a.createElement("div",{className:"spinner-layer spinner-green-only"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))))},h=a(175),g=a(176);var E=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],r=a[1],i=Object(n.useState)(""),u=Object(c.a)(i,2),d=u[0],E=u[1],b=Object(n.useState)(!1),v=Object(c.a)(b,2),y=v[0],j=v[1],O=Object(n.useContext)(C).state;return Object(n.useEffect)((function(){j(!0),fetch("/allposts",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){r(e.posts),j(!1)})).catch((function(e){console.log(e),j(!1)}))}),[]),l.a.createElement("div",null,y?l.a.createElement(f,null):l.a.createElement("div",{className:"home"},o.length?o.map((function(e,t){return l.a.createElement("div",{key:t,className:"card home-card"},l.a.createElement("h5",{className:"home-title"},l.a.createElement(h.a,{style:{marginRight:"5px"},src:e.postedBy.pic,alt:"avatar"}),l.a.createElement(s.b,{to:e.postedBy._id!==O._id?"/profile/"+e.postedBy._id:"/profile"},e.postedBy.name),e.postedBy._id===O._id?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer",float:"right"},onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){var t=o.filter((function(t){return t._id!==e._id}));r(t),m.a.toast({html:"delete post success",classes:"#2e7d32 green darken-3"})})).catch((function(e){return console.log(e)}));var t}},"delete"):l.a.createElement("i",{className:"material-icons",style:{color:"#ddd",float:"right"}},"delete")),l.a.createElement("div",{className:"car-image"},l.a.createElement("img",{style:{width:"100%"},src:e.photo,alt:e.title})),l.a.createElement("div",{className:"card-content"},e.likes.includes(O._id)?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){return t=e._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?Object(p.a)(Object(p.a)({},t),{},{likes:e.likes}):t}));r(t)})).catch((function(e){m.a.toast({html:e,classes:"#e53935 red darken-1"})}));var t}},"favorite"):l.a.createElement("i",{className:"material-icons",style:{color:"#ddd",cursor:"pointer"},onClick:function(){return t=e._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?Object(p.a)(Object(p.a)({},t),{},{likes:e.likes}):t}));r(t)})).catch((function(e){m.a.toast({html:e,classes:"#e53935 red darken-1"})}));var t}},"favorite"),l.a.createElement("span",null,e.likes.length," likes"),l.a.createElement("hr",null),l.a.createElement("h6",null,e.title),l.a.createElement("p",{style:{marginLeft:"10px"}},e.body),l.a.createElement("div",{style:{marginTop:"10px"}},e.comments.map((function(t,a){return l.a.createElement(g.a,{key:a,author:l.a.createElement(s.b,{to:t.postedBy._id!==O._id?"/profile/"+t.postedBy._id:"/profile"},e.postedBy.name),avatar:l.a.createElement(h.a,{src:t.postedBy.pic,alt:"Han Solo"}),content:l.a.createElement("p",null,t.text)})}))),l.a.createElement("form",{onSubmit:function(t){console.log(e.poste),t.preventDefault(),function(e,t){fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({text:e,postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?e:t}));r(t)})).catch((function(e){return console.log(e)}))}(t.target[0].value,e._id),E("")}},l.a.createElement("input",{type:"text",style:{borderBottom:"none"},placeholder:"add a comment",value:d,onChange:function(e){E(e.target.value)}}))))})):l.a.createElement("div",null,l.a.createElement("h2",null,"No posts"))))};var b=function(){var e=Object(n.useContext)(C),t=(e.state,e.dispatch),a=Object(i.f)(),o=Object(n.useState)(!1),r=Object(c.a)(o,2),u=r[0],d=r[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),g=h[0],E=h[1],b=Object(n.useState)(""),v=Object(c.a)(b,2),y=v[0],j=v[1];return l.a.createElement("div",null,u?l.a.createElement(f,null):l.a.createElement("div",{className:"mycard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"email",value:g,onChange:function(e){return E(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"password",value:y,onChange:function(e){return j(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2",onClick:function(){if(d(!0),!/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(g))return m.a.toast({html:"invalid email",classes:"#e53935 red darken-1"}),void d(!1);fetch("/signin",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({email:g,password:y})}).then((function(e){return e.json()})).then((function(e){d(!1),e.error?m.a.toast({html:e.error,classes:"#e53935 red darken-1"}):(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),m.a.toast({html:"login success",classes:"#2e7d32 green darken-3"}),a.push("/"))})).catch((function(e){d(!1),m.a.toast({html:e,classes:"#e53935 red darken-1"})}))}},"login"),l.a.createElement("h5",null,l.a.createElement(s.b,{to:"/signup"},"Dont have an account?")))))};var v=function(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],r=a[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),p=d[0],h=d[1],g=Object(n.useState)(""),E=Object(c.a)(g,2),b=E[0],v=E[1],y=Object(n.useState)(""),j=Object(c.a)(y,2),O=j[0],k=j[1],N=Object(n.useState)(!1),S=Object(c.a)(N,2),w=S[0],x=S[1],C=Object(n.useState)(void 0),_=Object(c.a)(C,2),B=_[0],I=_[1];Object(n.useEffect)((function(){B&&A()}),[B]);var A=function(){if(console.log(B),x(!0),!/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(p))return m.a.toast({html:"invalid email",classes:"#e53935 red darken-1"}),void x(!1);fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,password:b,email:p,pic:B})}).then((function(e){return e.json()})).then((function(t){x(!1),t.error?m.a.toast({html:t.error,classes:"#e53935 red darken-1"}):(m.a.toast({html:t.message,classes:"#2e7d32 green darken-3"}),e.push("/signin"))})).catch((function(e){x(!1),m.a.toast({html:e,classes:"#e53935 red darken-1"})}))};return l.a.createElement("div",null,w?l.a.createElement(f,null):l.a.createElement("div",{className:"mycard"},l.a.createElement("div",{className:"card auth-card input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"name",value:o,onChange:function(e){return r(e.target.value)},required:!0}),l.a.createElement("input",{type:"email",placeholder:"email",value:p,onChange:function(e){return h(e.target.value)},required:!0}),l.a.createElement("input",{type:"text",placeholder:"password",value:b,onChange:function(e){return v(e.target.value)},required:!0}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2",style:{marginTop:"0px"}},l.a.createElement("span",null,"Upload"),l.a.createElement("input",{type:"file",onChange:function(e){return k(e.target.files)}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload one or more files"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2",onClick:function(){O?function(){if(O.length>0){x(!0);for(var t=new FormData,a=0;a<O.length;a++)t.append("file",O[a]);t.append("upload_preset","instagram-clone"),t.append("cloud_name","clonedata"),fetch("\thttps://api.cloudinary.com/v1_1/clonedata/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){return I(e.url)})).catch((function(t){m.a.toast({html:"Create post fail!!",classes:"#e53935 red darken-1"}),x(!1),e.push("/signup"),console.log(t)}))}}():A()}},"login"),l.a.createElement("h5",null,l.a.createElement(s.b,{to:"/signin"},"Already have an account?")))))},y=a(177),j=a(37);var O=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(""),o=Object(c.a)(a,2),r=o[0],i=o[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),d=u[0],h=u[1],g=Object(n.useState)(!1),E=Object(c.a)(g,2),b=E[0],v=E[1],O=Object(n.useContext)(C),k=O.state,N=O.dispatch,S=Object(n.useState)(!1),w=Object(c.a)(S,2),x=w[0],_=w[1],B=Object(n.useState)(void 0),I=Object(c.a)(B,2),A=I[0],T=I[1],J=Object(n.useState)(null),z=Object(c.a)(J,2),D=z[0],U=z[1],P="https://images.unsplash.com/photo-1561470341-7d67ff1cdf9d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60";Object(n.useEffect)((function(){h(!0);fetch("/mypost",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){i(e.myPosts),h(!1)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){A&&fetch("/updatepic",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({pic:A})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(Object(p.a)(Object(p.a)({},k),{},{pic:e.pic}))),N({type:"UPDATE_PIC",payload:e.pic}),R(),m.a.toast({html:"Update avatar sucesss",classes:"#2e7d32 green darken-3"})})).catch((function(e){console.log(e)}))}),[A]);var R=function(){t.current.value=null,U(null),_(!1),v(!1)},L=function(e){e.preventDefault(),W()},W=function(){if(D.length>0){v(!0);for(var e=new FormData,a=0;a<D.length;a++)e.append("file",D[a]);e.append("upload_preset","instagram-clone"),e.append("cloud_name","clonedata"),fetch("\thttps://api.cloudinary.com/v1_1/clonedata/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){console.log(e),T(e.url),t.current.value=null,U(null),_(!1)})).catch((function(e){m.a.toast({html:"Update fail!!",classes:"#e53935 red darken-1"}),v(!1),console.log(e)}))}};return l.a.createElement("div",null,d?l.a.createElement(f,null):l.a.createElement("div",{style:{maxWidth:"750px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",padding:"18px 10px",borderBottom:"1px solid #ddd"}},l.a.createElement("div",{style:{display:"flex",position:"relative",flexDirection:"column",justifyContent:"center",alignItems:"center"}},l.a.createElement("img",{className:"profile-avatar",src:k&&k.pic?k.pic:P,alt:"avatar"}),l.a.createElement("button",{className:"btn-avatar",onClick:function(){_(!0)}},"Change")),l.a.createElement("div",null,l.a.createElement("h5",null,k?k.name:null),l.a.createElement("h6",null,k?k.email:null),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("span",{className:"mr-2"},r.length," posts"),l.a.createElement("span",{className:"mr-2"},k?k.followers.length:0," ","followers"),l.a.createElement("span",{className:"mr-2"},k?k.following.length:0," ","following")))),l.a.createElement("div",{className:"galley"},r?r.map((function(e,t){return l.a.createElement("img",{key:t,className:"item",src:e.photo,alt:e.title})})):null),l.a.createElement(y.a,{title:"Change Avatar",visible:x,onOk:L,onCancel:function(){return R()},footer:[l.a.createElement(j.a,{key:"back",onClick:function(){return R()}},"Hu\u1ef7"),l.a.createElement(j.a,{loading:b,key:"submit",type:"primary",onClick:function(e){return L(e)}},"Submit")]},l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2",style:{marginTop:"0px"}},l.a.createElement("span",null,"Upload"),l.a.createElement("input",{type:"file",onChange:function(e){U(e.target.files)},ref:t})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload one or more files"}))))))};var k=function(){var e=Object(i.f)(),t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),d=u[0],p=u[1],h=Object(n.useState)(""),g=Object(c.a)(h,2),E=g[0],b=g[1],v=Object(n.useState)(""),y=Object(c.a)(v,2),j=y[0],O=y[1],k=Object(n.useState)(""),N=Object(c.a)(k,2),S=N[0],w=N[1];return Object(n.useEffect)((function(){if(S){fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({title:d,body:E,photo:S})}).then((function(e){return e.json()})).then((function(t){r(!1),t.error?m.a.toast({html:t.error,classes:"#e53935 red darken-1"}):(m.a.toast({html:"create post success",classes:"#2e7d32 green darken-3"}),e.push("/"))})).catch((function(e){r(!1),m.a.toast({html:e,classes:"#e53935 red darken-1"})}))}}),[S]),l.a.createElement("div",null,o?l.a.createElement(f,null):l.a.createElement("div",{className:" card input-field",style:{margin:"10px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},l.a.createElement("input",{type:"text",placeholder:"Title",value:d,onChange:function(e){return p(e.target.value)}}),l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("textarea",{id:"textarea1",className:"materialize-textarea",value:E,onChange:function(e){return b(e.target.value)}}),l.a.createElement("label",{htmlFor:"textarea1"},"Description")),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn waves-effect waves-light #64b5f6 blue lighten-2",style:{marginTop:"0px"}},l.a.createElement("span",null,"File"),l.a.createElement("input",{type:"file",onChange:function(e){return O(e.target.files)}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload one or more files"}))),l.a.createElement("div",{className:" btn waves-effect waves-light #64b5f6 blue lighten-2",onClick:function(){if(j.length>0){r(!0);for(var t=new FormData,a=0;a<j.length;a++)t.append("file",j[a]);t.append("upload_preset","instagram-clone"),t.append("cloud_name","clonedata"),fetch("\thttps://api.cloudinary.com/v1_1/clonedata/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){return w(e.url)})).catch((function(t){m.a.toast({html:"Create post fail!!",classes:"#e53935 red darken-1"}),r(!1),e.push("/createpost"),console.log(t)}))}}},"Submit")))},N=a(99);var S=function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),m=u[0],d=u[1],h=Object(n.useContext)(C),g=h.state,E=h.dispatch,b=Object(i.g)().userid,v=Object(n.useState)(!g||!g.following.includes(b)),y=Object(c.a)(v,2),j=y[0],O=y[1];return Object(n.useEffect)((function(){d(!0);fetch("/user/".concat(b),{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){r(e),d(!1)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",null,m?l.a.createElement(f,null):o?l.a.createElement("div",{style:{maxWidth:"750px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",margin:"18px 5px",borderBottom:"1px solid #ddd"}},l.a.createElement("div",null,l.a.createElement("img",{className:"profile-avatar",src:o.user.pic?o.user.pic:"https://images.unsplash.com/photo-1561470341-7d67ff1cdf9d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60",alt:"avatar"})),l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("h5",null,o.user.name),j?l.a.createElement("button",{style:{marginTop:"15px",marginLeft:"10px",fontSize:"10px",padding:"0px 10px"},className:"btn  #64b5f6 blue lighten-2",onClick:function(){fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({followId:b})}).then((function(e){return e.json()})).then((function(e){E({type:"UPDATE",payload:{followers:e.followers,following:e.following}}),localStorage.setItem("user",JSON.stringify(e)),r((function(t){return Object(p.a)(Object(p.a)({},t),{},{user:Object(p.a)(Object(p.a)({},t.user),{},{followers:[].concat(Object(N.a)(t.user.followers),[e._id])})})})),O(!1)})).catch((function(e){console.log(e)}))}},"follow"):l.a.createElement("button",{style:{marginTop:"15px",marginLeft:"10px",fontSize:"10px",padding:"0px 10px"},className:"btn  #64b5f6 blue lighten-2",onClick:function(){fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({followId:b})}).then((function(e){return e.json()})).then((function(e){E({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),r((function(t){var a=t.user.followers.filter((function(t){return t!==e._id}));return Object(p.a)(Object(p.a)({},t),{},{user:Object(p.a)(Object(p.a)({},t.user),{},{followers:a})})})),O(!0)})).catch((function(e){console.log(e)}))}},"unfollow")),l.a.createElement("h6",null,o.user.email),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("span",{className:"mr-2"},o.posts.length," posts"),l.a.createElement("span",{className:"mr-2"},o.user.followers.length," ","followers"),l.a.createElement("span",{className:"mr-2"},o.user.following.length," ","following")))),l.a.createElement("div",{className:"galley"},o.posts.length>0?o.posts.map((function(e,t){return l.a.createElement("img",{key:t,className:"item",src:e.photo,alt:e.title})})):null)):l.a.createElement("div",null,"Not Found"))};var w=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],r=a[1],i=Object(n.useState)(""),u=Object(c.a)(i,2),d=u[0],h=u[1],g=Object(n.useState)(!1),E=Object(c.a)(g,2),b=E[0],v=E[1],y=Object(n.useContext)(C).state;return Object(n.useEffect)((function(){v(!0),fetch("/getsubpost",{method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){r(e.posts),v(!1)})).catch((function(e){console.log(e),v(!1)}))}),[]),l.a.createElement("div",null,b?l.a.createElement(f,null):l.a.createElement("div",{className:"home"},o.length?o.map((function(e,t){return l.a.createElement("div",{key:t,className:"card home-card"},l.a.createElement("h5",{className:"home-title"},l.a.createElement(s.b,{to:e.postedBy._id!==y._id?"/profile/"+e.postedBy._id:"/profile"},e.postedBy.name),e.postedBy._id===y._id?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer",float:"right"},onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){var t=o.filter((function(t){return t._id!==e._id}));r(t),m.a.toast({html:"delete post success",classes:"#2e7d32 green darken-3"})})).catch((function(e){return console.log(e)}));var t}},"delete"):l.a.createElement("i",{className:"material-icons",style:{color:"#ddd",float:"right"}},"delete")),l.a.createElement("div",{className:"car-image"},l.a.createElement("img",{style:{width:"100%"},src:e.photo,alt:e.title})),l.a.createElement("div",{className:"card-content input-field"},e.likes.includes(y._id)?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){return t=e._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?Object(p.a)(Object(p.a)({},t),{},{likes:e.likes}):t}));r(t)})).catch((function(e){m.a.toast({html:e,classes:"#e53935 red darken-1"})}));var t}},"favorite"):l.a.createElement("i",{className:"material-icons",style:{color:"#ddd",cursor:"pointer"},onClick:function(){return t=e._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?Object(p.a)(Object(p.a)({},t),{},{likes:e.likes}):t}));r(t)})).catch((function(e){m.a.toast({html:e,classes:"#e53935 red darken-1"})}));var t}},"favorite"),l.a.createElement("h6",null,e.likes.length," likes"),l.a.createElement("h6",null,e.title),l.a.createElement("p",null,e.body),e.comments.map((function(e){return l.a.createElement("h6",{key:e._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name),l.a.createElement("span",null," ",e.text))})),l.a.createElement("form",{onSubmit:function(t){console.log(e.poste),t.preventDefault(),function(e,t){fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({text:e,postId:t})}).then((function(e){return e.json()})).then((function(e){var t=o.map((function(t){return t._id===e._id?e:t}));r(t)})).catch((function(e){return console.log(e)}))}(t.target[0].value,e._id),h("")}},l.a.createElement("input",{type:"text",placeholder:"add a comment",value:d,onChange:function(e){h(e.target.value)}}))))})):l.a.createElement("div",null,l.a.createElement("h2",null,"No posts!!!"))))},x=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:"UPDATE"===t.type?Object(p.a)(Object(p.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATE_PIC"===t.type?Object(p.a)(Object(p.a)({},e),{},{pic:t.payload}):e},C=(a(173),Object(n.createContext)()),_=function(){var e=Object(i.f)(),t=Object(n.useContext)(C).dispatch;return Object(n.useEffect)((function(){var a=JSON.parse(localStorage.getItem("user"));a?(t({type:"USER",payload:a}),e.push("/")):e.push("/signin")}),[]),l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/"},l.a.createElement(E,null)),l.a.createElement(i.a,{path:"/signup"},l.a.createElement(v,null)),l.a.createElement(i.a,{path:"/signin"},l.a.createElement(b,null)),l.a.createElement(i.a,{exact:!0,path:"/profile"},l.a.createElement(O,null)),l.a.createElement(i.a,{path:"/createpost"},l.a.createElement(k,null)),l.a.createElement(i.a,{path:"/profile/:userid"},l.a.createElement(S,null)),l.a.createElement(i.a,{path:"/myfollowingpost"},l.a.createElement(w,null)))};var B=function(){var e=Object(n.useReducer)(x,null),t=Object(c.a)(e,2),a=t[0],o=t[1];return l.a.createElement(C.Provider,{value:{state:a,dispatch:o}},l.a.createElement(s.a,null,l.a.createElement(d,null),l.a.createElement(_,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.37331942.chunk.js.map